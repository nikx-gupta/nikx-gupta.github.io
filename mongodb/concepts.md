---
title: MongoDB Concepts
---

# Topics
- ### Wire protocol is used to encapsulate BSON data into network packets to be sent over the internet. It define
  of header and a body with formats defined by MongoDB. They are finally encapsulated in TCP/IP packets.
- ## Authentication
	- ### `SCRAM` (Salted Challenge Response Authentication Mechanism) is sued to guarantees user password is validated securely over the internet without transferring or storing passwords in clear text  
	- ### X.509 Certificate Authentication
- ## Fields
    - ### _id
		- Is Required. If not provided it is autogenerated by driver
		- The autogenerated field is type of `ObjectId`
		- It acts as a Primary Key to each Document
		- It is always Indexed
- ## Data Types
	- ### ObjectId
		- It is unique across different machines because of timestamp and randomness  
		- Size is 12 bytes
			- First 4 bytes are timestamp (no of seconds to epoch time)
			- 5th to 9th bytes are random
			- last 3 bytes are incremental counter
		- `getTimeStamp()` method on ObjectId tells document insertion time
	- ### Date 
		- Are stored in form of `milliseconds` since the Unix epoch (Januray, 1, 1970)
		- 64 bit Integer (long)
		- `new Date()`, `new ISODate()` creates UTC date in BSON format
		  ```bash
		    // In MongoShell
            new Date()
		    ISODate("2021-02-06T10:51:13.222Z")
		  ```
		- `Date()` method creates in local time zone format
		  ```bash
		    // In MongoShell
            Date()
		    Sat Feb 06 2021 02:53:10 GMT-0800 (PST)
		  ```
    - ### Time
		- 64 bit long
			- First 32 bits are no. of seconds since epoch time
			- Rest 32 bits are incrementing counter
	- ### Binary
		- called as `BinData`
		- Represented as BinData(0, "<base64 encoded value>")
- ## Limits
	- ### Document Size Limit
		- Every document has a limit of 16MB in size
	- ### Fields
		- Field names cannot contain null character
		- Field names cannot start from `dollar-sign($)`
		- Duplicate fields are not allowed but no error is thrown when inserting documents with duplicate fields, However it is allowed from mongo shell but second occurrence of the field will overwrite the first
- ## Oplog
	- Essential of MongoDB replication across slave nodes. It is a circual buffer which stores all data changes due to CRUD operations
	- Database queries doesnt generate any oplog records only crud operations
	- oplog records are stored in idempotent format so that we receive same result when applying it multiple times
	- check replication stats
		```bash
        db.oplog.rs.stats()
		```
	- it is different form `Wired Tiger Journalling` as latter is used to recover database when datafiles become corrupted.
	
- ## Write Concern
	- It enforces rule on mongodb to provide an acknowledgement from at least n no of cluster nodes for each write operation.
	- Default value is {w: 1} which means only primary node acknowledgement is required
	- Should be use with caution as it can severely decrease write performance
	
